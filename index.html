<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, interactive-widget=resizes-content">
    <meta name="description" content="- solutions for any ask -" >
    <meta name="theme-color" content="#edcfcf" id="theme-color-meta" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#141416" id="theme-color-meta-dark" media="(prefers-color-scheme: dark)">
    
    <!-- Cache control meta tags for immediate updates -->
    <meta http-equiv="Cache-Control" content="no-cache, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- Build version and timestamp for debugging -->
    <meta name="build-version" content="__VERSION__">
    <meta name="build-timestamp" content="__BUILD_TIME__">
    <meta name="generator" content="Vite + Three.js">
    
    <!-- Cache busting parameters -->
    <meta name="cache-buster" content="__BUILD_TIME__">
    <meta name="asset-version" content="v__VERSION__-__BUILD_TIME__">
    
    <!-- Mobile web app meta tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="GEUSE">
    <meta name="format-detection" content="telephone=no">
    
    <title>G E U S E</title>
    
    <!-- Native fonts only - no external dependencies -->
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon.png">
    <link rel="manifest" href="/site.webmanifest">
    
    <!-- Preload critical assets with cache busting -->
    <link rel="preload" href="https://www.geuse.io/media/sprite.png?v=__BUILD_TIME__" as="image" type="image/png">
    <link rel="preload" href="https://www.geuse.io/media/glitch.gif?v=__BUILD_TIME__" as="image" type="image/gif">
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://s3.us-east-1.amazonaws.com">
    <link rel="preconnect" href="https://www.geuse.io">

    <style>
        /* Safe area and dynamic viewport support */
        :root {
            --safe-area-inset-top: env(safe-area-inset-top, 0px);
            --safe-area-inset-right: env(safe-area-inset-right, 0px);
            --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
            --safe-area-inset-left: env(safe-area-inset-left, 0px);
            
            /* Dynamic viewport units fallback */
            --vh: 1vh;
            --vw: 1vw;
            --dvh: 1dvh;
            --dvw: 1dvw;
            --svh: 1svh;
            --svw: 1svw;
            --lvh: 1lvh;
            --lvw: 1lvw;
        }
        
        /* Support for browsers without dynamic viewport units */
        @supports not (height: 1dvh) {
            :root {
                --dvh: 1vh;
                --dvw: 1vw;
                --svh: 1vh;
                --svw: 1vw;
                --lvh: 1vh;
                --lvw: 1vw;
            }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica Neue", "Arial", sans-serif;
            font-weight: 400;
            font-style: normal;
            font-variant-numeric: tabular-nums;
            font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
            /* Enhanced iOS font rendering */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            font-variant-ligatures: common-ligatures;
            font-kerning: auto;
            
            /* Ensure body takes full viewport for Three.js renderer background */
            margin: 0;
            padding: 0;
            min-height: 100vh;
            min-height: 100dvh;
            overflow-x: hidden;
        }
        
        /* Safe area support for content containers (not Three.js renderer) */
        main, #container {
            padding-top: var(--safe-area-inset-top);
            padding-right: var(--safe-area-inset-right);
            padding-bottom: var(--safe-area-inset-bottom);
            padding-left: var(--safe-area-inset-left);
        }
        
        /* Section 508 compliance: Screen reader only content */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* Section 508 compliance: Skip navigation links */
        .skip-links {
            position: absolute;
            top: -40px;
            left: 6px;
            z-index: 9999;
        }
        
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #000;
            color: #fff;
            padding: 8px;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            z-index: 10000;
            transition: top 0.3s ease;
        }
        
        .skip-link:focus {
            top: 6px;
            outline: 2px solid #fff;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- Section 508 compliance: Skip navigation links -->
    <nav class="skip-links" aria-label="Skip navigation">
        <a href="#main-content" class="skip-link">Skip to main content</a>
        <a href="#chat-interface" class="skip-link">Skip to chat interface</a>
    </nav>
    
    <!-- Section 508 compliance: Proper heading structure -->
    <header role="banner">
        <h1 class="visually-hidden">Geuse - Digital Solutions and Chat Interface</h1>
    </header>
    
    <main role="main" id="main-content">
        <div id="container">- G E U S E -</div>
        <div class="visually-hidden">
            <h2>Interactive 3D Particle Animation</h2>
            <p>Navigate through different 3D particle formations. Click the chat icon to start a conversation.</p>
        </div>
        <div id="chat-interface" class="visually-hidden">
            <h2>Chat Interface</h2>
            <p>Interactive chat for service requests and inquiries.</p>
        </div>
    </main>
    
    <script type="module" src="/src/index.js"></script>
    <script>
        // Version and build information for debugging
        window.GEUSE_VERSION = '__VERSION__';
        window.GEUSE_BUILD_TIME = '__BUILD_TIME__';
        console.info('ðŸš€ GEUSE v' + window.GEUSE_VERSION + ' built at ' + window.GEUSE_BUILD_TIME);
        
        // Update theme color meta tag based on current theme
        function updateThemeColor() {
            const themeColorMetaLight = document.getElementById('theme-color-meta');
            const themeColorMetaDark = document.getElementById('theme-color-meta-dark');
            const currentTheme = document.documentElement.getAttribute('data-theme') ||
                                (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');

            // Update both meta tags to ensure Safari iOS picks up the change
            if (themeColorMetaLight) {
                themeColorMetaLight.content = currentTheme === 'dark' ? '#141416' : '#edcfcf';
            }
            if (themeColorMetaDark) {
                themeColorMetaDark.content = currentTheme === 'dark' ? '#141416' : '#edcfcf';
            }
        }
        
        // Update theme color on load and theme changes
        document.addEventListener('DOMContentLoaded', updateThemeColor);
        
        // Listen for theme changes
        const observer = new MutationObserver(updateThemeColor);
        observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] });
        
        // Listen for system theme changes
        if (window.matchMedia) {
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateThemeColor);
        }
        
        // Register service worker with cache busting
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js?v=' + window.GEUSE_BUILD_TIME)
                    .then(registration => {
                        console.log('ServiceWorker registration successful v' + window.GEUSE_VERSION);
                        // Force update check for new builds
                        if (registration.waiting) {
                            registration.waiting.postMessage({ type: 'SKIP_WAITING' });
                        }
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html> 